name: ğŸ›¡ï¸ 2025 ìŠ¤ë§ˆíŠ¸ ìµœì†Œ CI/CD

on:
  push:
    branches: [main]
  pull_request:
    branches: [main]

env:
  NODE_VERSION: "20"

jobs:
  smart-check:
    name: ğŸš¨ í•„ìˆ˜ ì•ˆì „ì¥ì¹˜ ì²´í¬
    runs-on: ubuntu-latest
    timeout-minutes: 10
    
    steps:
      - name: ğŸ“¥ ì½”ë“œ ì²´í¬ì•„ì›ƒ
        uses: actions/checkout@v4
      
      - name: ğŸ”§ Node.js ì„¤ì •  
        uses: actions/setup-node@v4
        with:
          node-version: ${{ env.NODE_VERSION }}
          cache: npm
      
      - name: ğŸ“¦ ì˜ì¡´ì„± ì„¤ì¹˜
        run: npm ci --no-audit --no-fund
      
      - name: ğŸš¨ CRITICAL - TypeScript ì²´í¬
        run: npm run type-check
        continue-on-error: false
      
      - name: ğŸš¨ CRITICAL - ë¹Œë“œ í…ŒìŠ¤íŠ¸
        env:
          NEXT_PUBLIC_SUPABASE_URL: ${{ secrets.NEXT_PUBLIC_SUPABASE_URL }}
          NEXT_PUBLIC_SUPABASE_ANON_KEY: ${{ secrets.NEXT_PUBLIC_SUPABASE_ANON_KEY }}
          SKIP_ENV_VALIDATION: true
        run: npm run build
        continue-on-error: false
      
      - name: âš ï¸ WARNING - ESLint ì²´í¬
        run: npm run lint -- --quiet --max-warnings 15
        continue-on-error: true
      
      - name: âœ… ë°°í¬ ì¤€ë¹„ ì™„ë£Œ
        run: |
          echo "ğŸ¯ 2025ë…„ ìŠ¤ë§ˆíŠ¸ 1ì¸ ê°œë°œì í‘œì¤€ ì ìš©"
          echo "âœ… TypeScript ì²´í¬: í†µê³¼ (CRITICAL)"  
          echo "âœ… ë¹Œë“œ í…ŒìŠ¤íŠ¸: í†µê³¼ (CRITICAL)"
          echo "âš ï¸ ESLint: ê²½ê³  í—ˆìš© (WARNING)"
          echo "ğŸš€ ì•ˆì „í•œ ë°°í¬ ì¤€ë¹„ ì™„ë£Œ!"
