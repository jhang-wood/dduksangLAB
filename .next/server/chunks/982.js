"use strict";exports.id=982,exports.ids=[982],exports.modules={51982:(e,t,l)=>{l.d(t,{Z:()=>Header});var s=l(30784),r=l(9885),a=l(57114),n=l(52451),i=l.n(n),o=l(93680),d=l(90092),c=l(56206),m=l(7382),x=l(27236),h=l(1264),u=l(6113),p=l.n(u);let g={secretKey:process.env.PAYAPP_SECRET_KEY||"2m/tdA5GmmwTLP/KWo9V7e1DPJnCCRVaOgT+oqg6zaM=",value:process.env.PAYAPP_VALUE||"2m/tdA5GmmwTLP/KWo9V7c0BU4QO/tDrbfcHeaukANY=",userCode:"BA0209",storeId:"dduksanglab",testMode:!0},b={basic:{id:"basic",name:"베이직 플랜",price:9900,description:"기본 강의 접근",features:["기본 강의 무제한 시청","커뮤니티 접근","기본 지원"]},pro:{id:"pro",name:"프로 플랜",price:29900,description:"전체 강의 + 프리미엄 기능",features:["모든 강의 무제한 시청","커뮤니티 프리미엄 접근","1:1 멘토링 월 1회","SaaS 홍보 기회","우선 지원"]},enterprise:{id:"enterprise",name:"엔터프라이즈",price:99900,description:"팀/기업용 맞춤 플랜",features:["모든 프로 플랜 기능","팀 계정 관리","전용 멘토링","맞춤형 교육 과정","전용 지원"]}};function generatePayAppSignature(e){let t=Object.keys(e).sort(),l=t.map(t=>`${t}=${e[t]}`).join("&"),s=l+g.value,r=p().createHmac("sha256",g.secretKey).update(s).digest("base64");return r}function generatePayAppUrl(e){let t={cmd:"pay",user_code:g.userCode,store_id:g.storeId,item_name:b[e.planId].name,amount:e.amount,order_no:e.orderId,user_name:e.userName,user_email:e.userEmail,return_url:"http://localhost:3000/payment/success",cancel_url:"http://localhost:3000/payment/cancel",noti_url:"http://localhost:3000/api/payment/webhook",test_mode:g.testMode?"Y":"N",timestamp:Math.floor(Date.now()/1e3)},l=generatePayAppSignature(t),s=new URLSearchParams({...Object.entries(t).reduce((e,[t,l])=>({...e,[t]:String(l)}),{}),signature:l}).toString();return`https://api.payapp.kr/v1/payment?${s}`}function generateOrderId(){let e=Date.now(),t=Math.random().toString(36).substring(2,9);return`DDK-${e}-${t}`.toUpperCase()}function AuthModal({isOpen:e,onClose:t,initialMode:l="signin"}){let[a,n]=(0,r.useState)(l),[i,o]=(0,r.useState)(""),[d,m]=(0,r.useState)(""),[u,p]=(0,r.useState)(""),[g,y]=(0,r.useState)("basic"),[j,w]=(0,r.useState)(!1),[f,v]=(0,r.useState)(!1),[N,k]=(0,r.useState)(null),{signIn:C,signUp:S}=(0,x.useAuth)(),handleSubmit=async e=>{e.preventDefault(),v(!0),k(null);try{if("signin"===a){let{error:e}=await C(i,d);if(e)throw e;t()}else{if(!j){w(!0),v(!1);return}let{error:e}=await S(i,d,{name:u,selected_plan:g});if(e)throw e;{let e=generateOrderId(),l=b[g],s=generatePayAppUrl({orderId:e,userName:u,userEmail:i,planId:g,amount:l.price});window.open(s,"payapp_payment","width=800,height=600"),t()}}}catch(e){k(e.message||"오류가 발생했습니다."),v(!1)}};return e?s.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50",children:(0,s.jsxs)("div",{className:"bg-gray-900 rounded-lg p-8 max-w-md w-full mx-4 relative",children:[s.jsx("button",{onClick:t,className:"absolute top-4 right-4 text-gray-400 hover:text-white",children:s.jsx(c.Z,{className:"w-6 h-6"})}),s.jsx("h2",{className:"text-2xl font-bold text-white mb-6",children:"signin"===a?"로그인":j?"플랜 선택":"회원가입"}),(0,s.jsxs)("form",{onSubmit:handleSubmit,className:"space-y-4",children:["signup"!==a||j?"signup"===a&&j?s.jsx("div",{className:"space-y-4",children:Object.entries(b).map(([e,t])=>s.jsx("div",{onClick:()=>y(e),className:`border rounded-lg p-4 cursor-pointer transition-all ${g===e?"border-yellow-400 bg-yellow-400/10":"border-gray-700 hover:border-gray-600"}`,children:(0,s.jsxs)("div",{className:"flex items-start justify-between",children:[(0,s.jsxs)("div",{className:"flex-1",children:[s.jsx("h3",{className:"text-lg font-semibold text-white",children:t.name}),s.jsx("p",{className:"text-gray-400 text-sm mt-1",children:t.description}),s.jsx("div",{className:"mt-3 space-y-1",children:t.features.map((e,t)=>(0,s.jsxs)("div",{className:"flex items-center text-sm text-gray-300",children:[s.jsx(h.Z,{className:"w-4 h-4 text-green-400 mr-2"}),s.jsx("span",{children:e})]},t))})]}),(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsxs)("div",{className:"text-2xl font-bold text-yellow-400",children:["₩",t.price.toLocaleString()]}),s.jsx("div",{className:"text-xs text-gray-400",children:"/월"})]})]})},e))}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{children:[s.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-300 mb-1",children:"이메일"}),s.jsx("input",{id:"email",type:"email",value:i,onChange:e=>o(e.target.value),className:"w-full px-4 py-2 bg-gray-800 border border-gray-700 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:border-yellow-400",placeholder:"example@email.com",required:!0})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-300 mb-1",children:"비밀번호"}),s.jsx("input",{id:"password",type:"password",value:d,onChange:e=>m(e.target.value),className:"w-full px-4 py-2 bg-gray-800 border border-gray-700 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:border-yellow-400",placeholder:"••••••••",required:!0,minLength:6})]})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{children:[s.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-300 mb-1",children:"이름"}),s.jsx("input",{id:"name",type:"text",value:u,onChange:e=>p(e.target.value),className:"w-full px-4 py-2 bg-gray-800 border border-gray-700 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:border-yellow-400",placeholder:"홍길동",required:!0})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-300 mb-1",children:"이메일"}),s.jsx("input",{id:"email",type:"email",value:i,onChange:e=>o(e.target.value),className:"w-full px-4 py-2 bg-gray-800 border border-gray-700 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:border-yellow-400",placeholder:"example@email.com",required:!0})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-300 mb-1",children:"비밀번호"}),s.jsx("input",{id:"password",type:"password",value:d,onChange:e=>m(e.target.value),className:"w-full px-4 py-2 bg-gray-800 border border-gray-700 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:border-yellow-400",placeholder:"••••••••",required:!0,minLength:6})]})]}),N&&s.jsx("div",{className:"text-red-400 text-sm bg-red-900/20 border border-red-800 rounded-lg p-3",children:N}),s.jsx("button",{type:"submit",disabled:f,className:"w-full bg-yellow-400 text-black font-semibold py-3 rounded-lg hover:bg-yellow-300 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:f?"처리 중...":"signin"===a?"로그인":j?"결제하기":"다음"})]}),s.jsx("div",{className:"mt-6 text-center text-gray-400",children:"signin"===a?(0,s.jsxs)(s.Fragment,{children:["계정이 없으신가요?"," ",s.jsx("button",{onClick:()=>{n("signup"),k(null),w(!1)},className:"text-yellow-400 hover:underline",children:"회원가입"})]}):(0,s.jsxs)(s.Fragment,{children:["이미 계정이 있으신가요?"," ",s.jsx("button",{onClick:()=>{n("signin"),k(null),w(!1)},className:"text-yellow-400 hover:underline",children:"로그인"})]})})]})}):null}function Header({currentPage:e="home"}){let[t,l]=(0,r.useState)(!1),[n,h]=(0,r.useState)(!1),[u,p]=(0,r.useState)(!1),[g,b]=(0,r.useState)("signin"),y=(0,a.useRouter)(),{user:j,userProfile:w,signOut:f,isAdmin:v}=(0,x.useAuth)(),N=[{id:"ai-trends",label:"AI 트렌드",href:"/ai-trends"},{id:"saas",label:"SaaS 쇼케이스",href:"/saas"},{id:"community",label:"커뮤니티",href:"/community"},{id:"lectures",label:"강의",href:"/lectures"},...v?[{id:"admin",label:"관리",href:"/admin"}]:[]],handleSignOut=async()=>{await f(),h(!1)},handleAuthClick=e=>{b(e),p(!0)};return(0,s.jsxs)("header",{className:"fixed top-0 left-0 right-0 z-50 bg-black/80 backdrop-blur-md border-b border-yellow-500/20",children:[(0,s.jsxs)("div",{className:"container mx-auto px-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between h-16",children:[s.jsx("div",{className:"flex items-center",children:s.jsx("a",{href:"/",className:"block",children:s.jsx("div",{className:"relative w-12 h-12",children:s.jsx(i(),{src:"/images/떡상연구소_로고-removebg-preview.png",alt:"떡상연구소 로고",fill:!0,className:"object-contain",priority:!0})})})}),s.jsx("nav",{className:"hidden md:flex space-x-6",children:N.map(t=>s.jsx("a",{href:t.href,className:`font-medium transition-colors ${e===t.id?"text-yellow-400":"text-gray-300 hover:text-yellow-400"}`,children:t.label},t.id))}),s.jsx("div",{className:"hidden md:flex items-center space-x-3",children:j?(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsxs)("button",{onClick:()=>h(!n),className:"flex items-center space-x-2 text-gray-300 hover:text-yellow-400 transition-colors",children:[s.jsx(o.Z,{size:20}),s.jsx("span",{children:w?.name||j.email?.split("@")[0]||"사용자"})]}),n&&s.jsx("div",{className:"absolute right-0 mt-2 w-48 bg-gray-900 border border-yellow-500/20 rounded-lg shadow-xl",children:(0,s.jsxs)("div",{className:"py-2",children:[s.jsx("div",{className:"px-4 py-2 text-sm text-gray-400 border-b border-gray-800",children:w?.role==="admin"?"관리자":"일반회원"}),s.jsx("button",{onClick:()=>y.push("/mypage"),className:"w-full px-4 py-2 text-left text-gray-300 hover:bg-gray-800 hover:text-yellow-400 transition-colors",children:"마이페이지"}),s.jsx("button",{onClick:()=>y.push("/settings"),className:"w-full px-4 py-2 text-left text-gray-300 hover:bg-gray-800 hover:text-yellow-400 transition-colors",children:"설정"}),(0,s.jsxs)("button",{onClick:handleSignOut,className:"w-full px-4 py-2 text-left text-gray-300 hover:bg-gray-800 hover:text-red-400 transition-colors flex items-center space-x-2",children:[s.jsx(d.Z,{size:16}),s.jsx("span",{children:"로그아웃"})]})]})})]}):(0,s.jsxs)(s.Fragment,{children:[s.jsx("button",{onClick:()=>handleAuthClick("signin"),className:"px-4 py-2 text-yellow-400 border border-yellow-400 rounded hover:bg-yellow-400 hover:text-black transition-colors",children:"로그인"}),s.jsx("button",{onClick:()=>handleAuthClick("signup"),className:"px-4 py-2 bg-yellow-400 text-black rounded hover:bg-yellow-500 transition-colors",children:"회원가입"})]})}),s.jsx("button",{onClick:()=>l(!t),className:"md:hidden text-gray-300 hover:text-yellow-400 transition-colors",children:t?s.jsx(c.Z,{size:24}):s.jsx(m.Z,{size:24})})]}),t&&s.jsx("div",{className:"md:hidden border-t border-yellow-500/20",children:(0,s.jsxs)("nav",{className:"py-4 space-y-2",children:[N.map(t=>s.jsx("a",{href:t.href,className:`block px-4 py-2 font-medium transition-colors ${e===t.id?"text-yellow-400":"text-gray-300 hover:text-yellow-400"}`,onClick:()=>l(!1),children:t.label},t.id)),s.jsx("div",{className:"px-4 pt-4 space-y-2",children:j?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"text-sm text-gray-400 mb-2",children:[w?.name||j.email?.split("@")[0]||"사용자"," (",w?.role==="admin"?"관리자":"일반회원",")"]}),s.jsx("button",{onClick:()=>{y.push("/mypage"),l(!1)},className:"block w-full px-4 py-2 text-left text-gray-300 hover:text-yellow-400 transition-colors",children:"마이페이지"}),s.jsx("button",{onClick:()=>{handleSignOut(),l(!1)},className:"block w-full px-4 py-2 text-left text-gray-300 hover:text-red-400 transition-colors",children:"로그아웃"})]}):(0,s.jsxs)("div",{className:"space-y-2",children:[s.jsx("button",{onClick:()=>{handleAuthClick("signin"),l(!1)},className:"block w-full px-4 py-2 text-yellow-400 border border-yellow-400 rounded hover:bg-yellow-400 hover:text-black transition-colors text-center",children:"로그인"}),s.jsx("button",{onClick:()=>{handleAuthClick("signup"),l(!1)},className:"block w-full px-4 py-2 bg-yellow-400 text-black rounded hover:bg-yellow-500 transition-colors text-center",children:"회원가입"})]})})]})})]}),s.jsx(AuthModal,{isOpen:u,onClose:()=>p(!1),initialMode:g})]})}}};