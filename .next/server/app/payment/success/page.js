(()=>{var e={};e.id=478,e.ids=[478],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},14300:e=>{"use strict";e.exports=require("buffer")},6113:e=>{"use strict";e.exports=require("crypto")},82361:e=>{"use strict";e.exports=require("events")},13685:e=>{"use strict";e.exports=require("http")},95687:e=>{"use strict";e.exports=require("https")},41808:e=>{"use strict";e.exports=require("net")},85477:e=>{"use strict";e.exports=require("punycode")},12781:e=>{"use strict";e.exports=require("stream")},24404:e=>{"use strict";e.exports=require("tls")},57310:e=>{"use strict";e.exports=require("url")},59796:e=>{"use strict";e.exports=require("zlib")},1264:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});var r=s(3528);let a=(0,r.Z)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},93758:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>i.a,__next_app__:()=>p,originalPathname:()=>d,pages:()=>u,routeModule:()=>x,tree:()=>c});var r=s(67096),a=s(16132),n=s(37284),i=s.n(n),o=s(32564),l={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);s.d(t,l);let c=["",{children:["payment",{children:["success",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,96784)),"/home/qwg18/dduksangLAB/app/payment/success/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,8891)),"/home/qwg18/dduksangLAB/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,9291,23)),"next/dist/client/components/not-found-error"]}],u=["/home/qwg18/dduksangLAB/app/payment/success/page.tsx"],d="/payment/success/page",p={require:s,loadChunk:()=>Promise.resolve()},x=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/payment/success/page",pathname:"/payment/success",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},64716:(e,t,s)=>{Promise.resolve().then(s.bind(s,5380))},5380:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>PaymentSuccessPage});var r=s(30784),a=s(9885),n=s(57114),i=s(1264),o=s(59708),l=s(27236);function PaymentSuccessPage(){let e=(0,n.useSearchParams)(),t=(0,n.useRouter)(),{user:s}=(0,l.useAuth)(),[c,u]=(0,a.useState)(!0),[d,p]=(0,a.useState)(null);(0,a.useEffect)(()=>{handlePaymentSuccess()},[]);let handlePaymentSuccess=async()=>{try{let r=e.get("order_no"),a=e.get("payapp_order_id");if(!r||!s)throw Error("잘못된 접근입니다.");let{error:n}=await o.OQ.from("users").update({user_type:"student",payment_status:"paid",last_payment_date:new Date().toISOString()}).eq("id",s.id);if(n)throw n;let{error:i}=await o.OQ.from("payments").insert({user_id:s.id,order_id:r,payapp_order_id:a,amount:29900,status:"completed",created_at:new Date().toISOString()});i&&console.error("결제 기록 저장 실패:",i),setTimeout(()=>{t.push("/lectures")},3e3)}catch(e){p(e.message)}finally{u(!1)}};return r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-black via-gray-900 to-black flex items-center justify-center px-4",children:r.jsx("div",{className:"max-w-md w-full",children:r.jsx("div",{className:"bg-gray-900 border border-gray-800 rounded-lg p-8 text-center",children:c?(0,r.jsxs)(r.Fragment,{children:[r.jsx("div",{className:"w-16 h-16 bg-yellow-400/20 rounded-full flex items-center justify-center mx-auto mb-6",children:r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-yellow-400"})}),r.jsx("h1",{className:"text-2xl font-bold text-white mb-2",children:"결제 처리 중..."}),r.jsx("p",{className:"text-gray-400",children:"잠시만 기다려주세요."})]}):d?(0,r.jsxs)(r.Fragment,{children:[r.jsx("div",{className:"w-16 h-16 bg-red-900/20 rounded-full flex items-center justify-center mx-auto mb-6",children:r.jsx("span",{className:"text-red-400 text-3xl",children:"!"})}),r.jsx("h1",{className:"text-2xl font-bold text-white mb-2",children:"결제 처리 실패"}),r.jsx("p",{className:"text-red-400 mb-6",children:d}),r.jsx("button",{onClick:()=>t.push("/"),className:"px-6 py-3 bg-yellow-400 text-black font-semibold rounded-lg hover:bg-yellow-300 transition-colors",children:"홈으로 돌아가기"})]}):(0,r.jsxs)(r.Fragment,{children:[r.jsx("div",{className:"w-16 h-16 bg-green-900/20 rounded-full flex items-center justify-center mx-auto mb-6",children:r.jsx(i.Z,{className:"text-green-400",size:32})}),r.jsx("h1",{className:"text-2xl font-bold text-white mb-2",children:"결제 완료!"}),(0,r.jsxs)("p",{className:"text-gray-400 mb-6",children:["프로 플랜 가입이 완료되었습니다.",r.jsx("br",{}),"모든 강의를 자유롭게 수강하실 수 있습니다."]}),r.jsx("p",{className:"text-sm text-gray-500",children:"잠시 후 강의 페이지로 이동합니다..."})]})})})})}},96784:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>i,__esModule:()=>n,default:()=>l});var r=s(95153);let a=(0,r.createProxy)(String.raw`/home/qwg18/dduksangLAB/app/payment/success/page.tsx`),{__esModule:n,$$typeof:i}=a,o=a.default,l=o}};var t=require("../../../webpack-runtime.js");t.C(e);var __webpack_exec__=e=>t(t.s=e),s=t.X(0,[382,528,386],()=>__webpack_exec__(93758));module.exports=s})();