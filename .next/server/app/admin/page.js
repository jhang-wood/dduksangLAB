(()=>{var e={};e.id=3,e.ids=[3],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},14300:e=>{"use strict";e.exports=require("buffer")},6113:e=>{"use strict";e.exports=require("crypto")},82361:e=>{"use strict";e.exports=require("events")},13685:e=>{"use strict";e.exports=require("http")},95687:e=>{"use strict";e.exports=require("https")},41808:e=>{"use strict";e.exports=require("net")},85477:e=>{"use strict";e.exports=require("punycode")},12781:e=>{"use strict";e.exports=require("stream")},24404:e=>{"use strict";e.exports=require("tls")},57310:e=>{"use strict";e.exports=require("url")},59796:e=>{"use strict";e.exports=require("zlib")},50851:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>i.a,__next_app__:()=>m,originalPathname:()=>o,pages:()=>x,routeModule:()=>p,tree:()=>d});var a=s(67096),r=s(16132),l=s(37284),i=s.n(l),c=s(32564),n={};for(let e in c)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(n[e]=()=>c[e]);s.d(t,n);let d=["",{children:["admin",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,13729)),"/home/qwg18/dduksangLAB/app/admin/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,8891)),"/home/qwg18/dduksangLAB/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,9291,23)),"next/dist/client/components/not-found-error"]}],x=["/home/qwg18/dduksangLAB/app/admin/page.tsx"],o="/admin/page",m={require:s,loadChunk:()=>Promise.resolve()},p=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/admin/page",pathname:"/admin",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},22615:(e,t,s)=>{Promise.resolve().then(s.bind(s,48200))},48200:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>AdminPage});var a=s(30784),r=s(9885),l=s(89139),i=s(35256),c=s(91672),n=s(78937),d=s(18310),x=s(5987),o=s(89815),m=s(67932),p=s(66908),h=s(69518),u=s(28626),g=s(59494),y=s(26303),j=s(1264),f=s(22385),b=s(57114),w=s(27236);function ProtectedRoute({children:e,requireAdmin:t=!1}){let{user:s,userProfile:l,loading:i}=(0,w.useAuth)(),c=(0,b.useRouter)();return((0,r.useEffect)(()=>{!i&&(s?t&&l?.role!=="admin"&&c.push("/"):c.push("/"))},[s,l,i,t,c]),i)?a.jsx("div",{className:"min-h-screen flex items-center justify-center",children:a.jsx("div",{className:"text-yellow-400",children:"로딩 중..."})}):!s||t&&l?.role!=="admin"?null:a.jsx(a.Fragment,{children:e})}var N=s(51982),v=s(59708);function AdminPage(){let[e,t]=(0,r.useState)("dashboard"),[s,b]=(0,r.useState)(""),[_,S]=(0,r.useState)(!0),[k,q]=(0,r.useState)({totalUsers:0,totalLectures:0,totalPosts:0,totalSaas:0,userGrowth:0,activeUsers:0,revenue:0,paidUsers:0}),[D,Z]=(0,r.useState)([]),[P,L]=(0,r.useState)([]),[A,z]=(0,r.useState)([]),[O,C]=(0,r.useState)([]),{signOut:Q}=(0,w.useAuth)(),U=[{id:"dashboard",label:"대시보드",icon:i.Z},{id:"users",label:"회원관리",icon:c.Z},{id:"lectures",label:"강의관리",icon:n.Z},{id:"community",label:"커뮤니티",icon:d.Z},{id:"saas",label:"SaaS 관리",icon:x.Z}];(0,r.useEffect)(()=>{loadDashboardData()},[e]);let loadDashboardData=async()=>{try{S(!0);let{data:e,count:t}=await v.OQ.from("profiles").select("*",{count:"exact"}).order("created_at",{ascending:!1}).limit(10),{count:s}=await v.OQ.from("profiles").select("*",{count:"exact",head:!0}).eq("role","user"),{data:a,count:r}=await v.OQ.from("lectures").select("*",{count:"exact"}).order("created_at",{ascending:!1}).limit(10),{data:l,count:i}=await v.OQ.from("community_posts").select("*, profiles(name, email)",{count:"exact"}).order("created_at",{ascending:!1}).limit(10),{data:c,count:n}=await v.OQ.from("saas_products").select("*, profiles(name, email)",{count:"exact"}).order("created_at",{ascending:!1}).limit(10),d=new Date;d.setDate(d.getDate()-7);let{count:x}=await v.OQ.from("profiles").select("*",{count:"exact",head:!0}).gte("updated_at",d.toISOString()),o=new Date;o.setDate(1),o.setHours(0,0,0,0);let m=new Date(o);m.setMonth(m.getMonth()-1);let{count:p}=await v.OQ.from("profiles").select("*",{count:"exact",head:!0}).gte("created_at",o.toISOString()),{count:h}=await v.OQ.from("profiles").select("*",{count:"exact",head:!0}).gte("created_at",m.toISOString()).lt("created_at",o.toISOString()),u=h&&h>0?Math.round(((p||0)-h)/h*100):0;q({totalUsers:t||0,totalLectures:r||0,totalPosts:i||0,totalSaas:n||0,userGrowth:u,activeUsers:x||0,revenue:29900*(s||0),paidUsers:s||0}),Z(e||[]),L(l||[]),z(a||[]),C(c||[])}catch(e){console.error("대시보드 데이터 로드 실패:",e)}finally{S(!1)}},handleDeleteUser=async e=>{if(confirm("정말로 이 사용자를 삭제하시겠습니까?")){let{error:t}=await v.OQ.from("profiles").delete().eq("id",e);t||loadDashboardData()}},handleDeletePost=async e=>{if(confirm("정말로 이 게시글을 삭제하시겠습니까?")){let{error:t}=await v.OQ.from("community_posts").delete().eq("id",e);t||loadDashboardData()}},handleApproveSaas=async e=>{let{error:t}=await v.OQ.from("saas_products").update({status:"approved"}).eq("id",e);t||loadDashboardData()},$=[{label:"전체 회원",value:k.totalUsers.toLocaleString(),change:`+${k.userGrowth}%`,icon:c.Z,color:"text-blue-400"},{label:"강의 수",value:k.totalLectures.toString(),change:"Active",icon:n.Z,color:"text-green-400"},{label:"커뮤니티 게시글",value:k.totalPosts.toLocaleString(),change:"Active",icon:d.Z,color:"text-purple-400"},{label:"SaaS 등록",value:k.totalSaas.toString(),change:"Active",icon:x.Z,color:"text-yellow-400"},{label:"활성 사용자",value:k.activeUsers.toLocaleString(),change:"7일 이내",icon:o.Z,color:"text-green-400"},{label:"유료 회원",value:k.paidUsers.toLocaleString(),change:"수강생",icon:m.Z,color:"text-yellow-400"},{label:"예상 수익",value:`₩${k.revenue.toLocaleString()}`,change:"월간",icon:p.Z,color:"text-green-400"}];return a.jsx(ProtectedRoute,{requireAdmin:!0,children:(0,a.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-black via-gray-900 to-black",children:[a.jsx(N.Z,{currentPage:"admin"}),a.jsx("div",{className:"container mx-auto px-4 py-8 mt-16",children:(0,a.jsxs)("div",{className:"flex gap-8",children:[a.jsx("div",{className:"w-64 space-y-2",children:U.map(s=>(0,a.jsxs)("button",{onClick:()=>t(s.id),className:`w-full flex items-center space-x-3 px-4 py-3 rounded-lg transition-colors ${e===s.id?"bg-yellow-400/20 text-yellow-400 border border-yellow-400/50":"text-gray-400 hover:text-white hover:bg-gray-800"}`,children:[a.jsx(s.icon,{size:20}),a.jsx("span",{className:"font-medium",children:s.label})]},s.id))}),a.jsx("div",{className:"flex-1",children:_?a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx("div",{className:"text-yellow-400",children:"로딩 중..."})}):(0,a.jsxs)(a.Fragment,{children:["dashboard"===e&&(0,a.jsxs)("div",{className:"space-y-6",children:[a.jsx("h2",{className:"text-2xl font-bold text-white mb-6",children:"대시보드"}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:$.map((e,t)=>(0,a.jsxs)(l.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*t},className:"bg-gray-900 border border-gray-800 rounded-lg p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[a.jsx(e.icon,{className:e.color,size:24}),a.jsx("span",{className:"text-xs text-gray-500",children:e.change})]}),a.jsx("h3",{className:"text-2xl font-bold text-white mb-1",children:e.value}),a.jsx("p",{className:"text-sm text-gray-400",children:e.label})]},e.label))}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"bg-gray-900 border border-gray-800 rounded-lg p-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"최근 가입 회원"}),a.jsx("div",{className:"space-y-3",children:D.slice(0,5).map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-white font-medium",children:e.name||e.email?.split("@")[0]}),a.jsx("p",{className:"text-xs text-gray-400",children:e.email})]}),a.jsx("span",{className:`text-xs px-2 py-1 rounded ${"admin"===e.role?"bg-red-900/50 text-red-400":"bg-gray-800 text-gray-400"}`,children:"admin"===e.role?"관리자":"일반회원"})]},e.id))})]}),(0,a.jsxs)("div",{className:"bg-gray-900 border border-gray-800 rounded-lg p-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"최근 게시글"}),a.jsx("div",{className:"space-y-3",children:P.slice(0,5).map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex-1",children:[a.jsx("p",{className:"text-white font-medium truncate",children:e.title}),a.jsx("p",{className:"text-xs text-gray-400",children:e.profiles?.name||"익명"})]}),a.jsx("span",{className:"text-xs text-gray-500",children:new Date(e.created_at).toLocaleDateString()})]},e.id))})]})]})]}),"users"===e&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h2",{className:"text-2xl font-bold text-white",children:"회원 관리"}),a.jsx("div",{className:"flex items-center space-x-4",children:(0,a.jsxs)("div",{className:"relative",children:[a.jsx(h.Z,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:20}),a.jsx("input",{type:"text",placeholder:"회원 검색...",value:s,onChange:e=>b(e.target.value),className:"pl-10 pr-4 py-2 bg-gray-800 border border-gray-700 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:border-yellow-400"})]})})]}),a.jsx("div",{className:"bg-gray-900 border border-gray-800 rounded-lg overflow-hidden",children:(0,a.jsxs)("table",{className:"w-full",children:[a.jsx("thead",{className:"bg-gray-800",children:(0,a.jsxs)("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider",children:"사용자"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider",children:"유형"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider",children:"가입일"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider",children:"상태"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider",children:"액션"})]})}),a.jsx("tbody",{className:"divide-y divide-gray-800",children:D.filter(e=>e.email?.toLowerCase().includes(s.toLowerCase())||e.name?.toLowerCase().includes(s.toLowerCase())).map(e=>(0,a.jsxs)("tr",{children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsxs)("div",{children:[a.jsx("div",{className:"text-sm font-medium text-white",children:e.name||"미설정"}),a.jsx("div",{className:"text-sm text-gray-400",children:e.email})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("span",{className:`px-2 py-1 text-xs rounded ${"admin"===e.role?"bg-red-900/50 text-red-400":"bg-gray-800 text-gray-400"}`,children:"admin"===e.role?"관리자":"일반회원"})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-400",children:new Date(e.created_at).toLocaleDateString()}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("span",{className:"px-2 py-1 text-xs rounded bg-green-900/50 text-green-400",children:"활성"})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx("button",{className:"text-blue-400 hover:text-blue-300",children:a.jsx(u.Z,{size:16})}),a.jsx("button",{className:"text-yellow-400 hover:text-yellow-300",children:a.jsx(g.Z,{size:16})}),a.jsx("button",{onClick:()=>handleDeleteUser(e.id),className:"text-red-400 hover:text-red-300",children:a.jsx(y.Z,{size:16})})]})})]},e.id))})]})})]}),"community"===e&&(0,a.jsxs)("div",{className:"space-y-6",children:[a.jsx("div",{className:"flex items-center justify-between mb-6",children:a.jsx("h2",{className:"text-2xl font-bold text-white",children:"커뮤니티 관리"})}),a.jsx("div",{className:"bg-gray-900 border border-gray-800 rounded-lg overflow-hidden",children:(0,a.jsxs)("table",{className:"w-full",children:[a.jsx("thead",{className:"bg-gray-800",children:(0,a.jsxs)("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider",children:"게시글"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider",children:"작성자"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider",children:"카테고리"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider",children:"작성일"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider",children:"액션"})]})}),a.jsx("tbody",{className:"divide-y divide-gray-800",children:P.map(e=>(0,a.jsxs)("tr",{children:[a.jsx("td",{className:"px-6 py-4",children:a.jsx("div",{className:"text-sm font-medium text-white",children:e.title})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-400",children:e.profiles?.name||"익명"}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("span",{className:"px-2 py-1 text-xs rounded bg-gray-800 text-gray-400",children:e.category||"일반"})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-400",children:new Date(e.created_at).toLocaleDateString()}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx("button",{className:"text-blue-400 hover:text-blue-300",children:a.jsx(u.Z,{size:16})}),a.jsx("button",{onClick:()=>handleDeletePost(e.id),className:"text-red-400 hover:text-red-300",children:a.jsx(y.Z,{size:16})})]})})]},e.id))})]})})]}),"saas"===e&&(0,a.jsxs)("div",{className:"space-y-6",children:[a.jsx("div",{className:"flex items-center justify-between mb-6",children:a.jsx("h2",{className:"text-2xl font-bold text-white",children:"SaaS 관리"})}),a.jsx("div",{className:"bg-gray-900 border border-gray-800 rounded-lg overflow-hidden",children:(0,a.jsxs)("table",{className:"w-full",children:[a.jsx("thead",{className:"bg-gray-800",children:(0,a.jsxs)("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider",children:"제품명"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider",children:"개발자"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider",children:"카테고리"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider",children:"상태"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider",children:"액션"})]})}),a.jsx("tbody",{className:"divide-y divide-gray-800",children:O.map(e=>(0,a.jsxs)("tr",{children:[a.jsx("td",{className:"px-6 py-4",children:a.jsx("div",{className:"text-sm font-medium text-white",children:e.name})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-400",children:e.profiles?.name||"익명"}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("span",{className:"px-2 py-1 text-xs rounded bg-gray-800 text-gray-400",children:e.category})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("span",{className:`px-2 py-1 text-xs rounded ${"approved"===e.status?"bg-green-900/50 text-green-400":"bg-yellow-900/50 text-yellow-400"}`,children:"approved"===e.status?"승인됨":"대기중"})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:["approved"!==e.status&&a.jsx("button",{onClick:()=>handleApproveSaas(e.id),className:"text-green-400 hover:text-green-300",children:a.jsx(j.Z,{size:16})}),a.jsx("button",{className:"text-blue-400 hover:text-blue-300",children:a.jsx(u.Z,{size:16})}),a.jsx("button",{className:"text-red-400 hover:text-red-300",children:a.jsx(y.Z,{size:16})})]})})]},e.id))})]})})]}),"lectures"===e&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h2",{className:"text-2xl font-bold text-white",children:"강의 관리"}),(0,a.jsxs)("button",{className:"px-4 py-2 bg-yellow-400 text-black font-semibold rounded-lg hover:bg-yellow-300 transition-colors flex items-center space-x-2",children:[a.jsx(f.Z,{size:20}),a.jsx("span",{children:"새 강의 추가"})]})]}),a.jsx("div",{className:"bg-gray-900 border border-gray-800 rounded-lg overflow-hidden",children:(0,a.jsxs)("table",{className:"w-full",children:[a.jsx("thead",{className:"bg-gray-800",children:(0,a.jsxs)("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider",children:"강의명"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider",children:"강사"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider",children:"수강생"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider",children:"가격"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider",children:"액션"})]})}),a.jsx("tbody",{className:"divide-y divide-gray-800",children:A.map(e=>(0,a.jsxs)("tr",{children:[a.jsx("td",{className:"px-6 py-4",children:a.jsx("div",{className:"text-sm font-medium text-white",children:e.title})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-400",children:e.instructor}),(0,a.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-400",children:[e.students||0,"명"]}),(0,a.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-400",children:["₩",(e.price||0).toLocaleString()]}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx("button",{className:"text-blue-400 hover:text-blue-300",children:a.jsx(u.Z,{size:16})}),a.jsx("button",{className:"text-yellow-400 hover:text-yellow-300",children:a.jsx(g.Z,{size:16})}),a.jsx("button",{className:"text-red-400 hover:text-red-300",children:a.jsx(y.Z,{size:16})})]})})]},e.id))})]})})]})]})})]})})]})})}},13729:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>i,__esModule:()=>l,default:()=>n});var a=s(95153);let r=(0,a.createProxy)(String.raw`/home/qwg18/dduksangLAB/app/admin/page.tsx`),{__esModule:l,$$typeof:i}=r,c=r.default,n=c}};var t=require("../../webpack-runtime.js");t.C(e);var __webpack_exec__=e=>t(t.s=e),s=t.X(0,[382,528,789,451,727,329,293,386,982],()=>__webpack_exec__(50851));module.exports=s})();