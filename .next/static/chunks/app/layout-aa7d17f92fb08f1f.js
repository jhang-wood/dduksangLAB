(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{6147:function(e,t,n){Promise.resolve().then(n.bind(n,5093)),Promise.resolve().then(n.t.bind(n,3925,23)),Promise.resolve().then(n.t.bind(n,2853,23))},5093:function(e,t,n){"use strict";n.r(t),n.d(t,{AuthProvider:function(){return AuthProvider},useAuth:function(){return useAuth}});var r=n(7437),i=n(2265),s=n(2899),u=n(4033);let o=(0,i.createContext)(void 0);function AuthProvider(e){let{children:t}=e,[n,l]=(0,i.useState)(null),[a,c]=(0,i.useState)(null),[f,d]=(0,i.useState)(!0),h=(0,u.useRouter)(),fetchUserProfile=async e=>{let{data:t,error:n}=await s.OQ.from("profiles").select("*").eq("id",e).single();t&&c(t)};(0,i.useEffect)(()=>{s.OQ.auth.getSession().then(e=>{var t;let{data:{session:n}}=e;l(null!==(t=null==n?void 0:n.user)&&void 0!==t?t:null),(null==n?void 0:n.user)&&fetchUserProfile(n.user.id),d(!1)});let{data:{subscription:e}}=s.OQ.auth.onAuthStateChange(async(e,t)=>{var n;l(null!==(n=null==t?void 0:t.user)&&void 0!==n?n:null),(null==t?void 0:t.user)?await fetchUserProfile(t.user.id):c(null)});return()=>e.unsubscribe()},[]);let signIn=async(e,t)=>{let{data:n,error:r}=await s.OQ.auth.signInWithPassword({email:e,password:t});return n.user&&await fetchUserProfile(n.user.id),{error:r}},signUp=async(e,t,n)=>{let{data:r,error:i}=await s.OQ.auth.signUp({email:e,password:t,options:{data:n}});if(r.user&&!i){let{error:t}=await s.OQ.from("profiles").insert({id:r.user.id,email:r.user.email,name:(null==n?void 0:n.name)||e.split("@")[0],phone:(null==n?void 0:n.phone)||"",role:"user",created_at:new Date().toISOString()});t&&console.error("프로필 생성 오류:",t)}return{error:i}},signOut=async()=>{await s.OQ.auth.signOut(),c(null),h.push("/")},v=(null==a?void 0:a.role)==="admin";return(0,r.jsx)(o.Provider,{value:{user:n,userProfile:a,loading:f,signIn,signUp,signOut,isAdmin:v},children:t})}let useAuth=()=>{let e=(0,i.useContext)(o);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},2899:function(e,t,n){"use strict";n.d(t,{OQ:function(){return i}});var r=n(1492);let i=(0,r.eI)("https://wpzvocfgfwvsxmpckdnu.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6IndwenZvY2ZnZnd2c3htcGNrZG51Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTI2Njc4NTIsImV4cCI6MjA2ODI0Mzg1Mn0.LlO3iM55sbzXexcCExkDsSH448J2Z-NJUT1aZQCdck8")},2853:function(){},3925:function(e){e.exports={style:{fontFamily:"'__Inter_e8ce0c', '__Inter_Fallback_e8ce0c'",fontStyle:"normal"},className:"__className_e8ce0c"}},622:function(e,t,n){"use strict";/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r=n(2265),i=Symbol.for("react.element"),s=Symbol.for("react.fragment"),u=Object.prototype.hasOwnProperty,o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function q(e,t,n){var r,s={},a=null,c=null;for(r in void 0!==n&&(a=""+n),void 0!==t.key&&(a=""+t.key),void 0!==t.ref&&(c=t.ref),t)u.call(t,r)&&!l.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===s[r]&&(s[r]=t[r]);return{$$typeof:i,type:e,key:a,ref:c,props:s,_owner:o.current}}t.Fragment=s,t.jsx=q,t.jsxs=q},7437:function(e,t,n){"use strict";e.exports=n(622)}},function(e){e.O(0,[815,971,472,744],function(){return e(e.s=6147)}),_N_E=e.O()}]);