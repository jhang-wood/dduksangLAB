(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[422],{5883:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var a=n(2898);let s=(0,a.Z)("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]])},2741:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var a=n(2898);let s=(0,a.Z)("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]])},7972:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var a=n(2898);let s=(0,a.Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},2549:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var a=n(2898);let s=(0,a.Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},3102:function(e,t,n){Promise.resolve().then(n.bind(n,5927))},5927:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return MyPage}});var a=n(7437),s=n(2265),l=n(3082),r=n(4033),i=n(732),o=n(2898);let d=(0,o.Z)("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]),c=(0,o.Z)("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);var u=n(2549),h=n(5883),x=n(1295),m=n(7972),y=n(2741),b=n(1396),p=n.n(b);function MyPage(){let[e,t]=(0,s.useState)(null),[n,o]=(0,s.useState)(null),[b,g]=(0,s.useState)(!0),[f,v]=(0,s.useState)(!1),[j,w]=(0,s.useState)({name:"",phone:"",bio:""}),N=(0,r.useRouter)(),k=(0,l.createClientComponentClient)();(0,s.useEffect)(()=>{checkUser()},[]);let checkUser=async()=>{try{let{data:{user:e}}=await k.auth.getUser();if(!e){N.push("/auth/login");return}t(e);let{data:n,error:a}=await k.from("profiles").select("*").eq("id",e.id).single();n&&(o(n),w({name:n.name||"",phone:n.phone||"",bio:n.bio||""}))}catch(e){console.error("Error:",e)}finally{g(!1)}},handleLogout=async()=>{await k.auth.signOut(),N.push("/")},handleSave=async()=>{try{let{error:t}=await k.from("profiles").update({name:j.name,phone:j.phone,bio:j.bio,updated_at:new Date().toISOString()}).eq("id",e.id);t||(o({...n,...j}),v(!1))}catch(e){console.error("Error updating profile:",e)}},handleChange=e=>{w({...j,[e.target.name]:e.target.value})};return b?(0,a.jsx)("div",{className:"min-h-screen bg-black flex items-center justify-center",children:(0,a.jsx)("div",{className:"text-yellow-400",children:"로딩 중..."})}):(0,a.jsx)("div",{className:"min-h-screen bg-black px-4 py-12",children:(0,a.jsx)("div",{className:"container mx-auto max-w-4xl",children:(0,a.jsxs)(i.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[(0,a.jsxs)("div",{className:"bg-gray-900/50 backdrop-blur-sm rounded-xl p-8 border border-yellow-500/20",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-white",children:"마이페이지"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[f?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("button",{onClick:handleSave,className:"px-4 py-2 bg-green-500 text-white rounded hover:bg-green-600 transition-colors flex items-center gap-2",children:[(0,a.jsx)(c,{size:18}),"저장"]}),(0,a.jsxs)("button",{onClick:()=>{v(!1),w({name:(null==n?void 0:n.name)||"",phone:(null==n?void 0:n.phone)||"",bio:(null==n?void 0:n.bio)||""})},className:"px-4 py-2 bg-gray-600 text-white rounded hover:bg-gray-700 transition-colors flex items-center gap-2",children:[(0,a.jsx)(u.Z,{size:18}),"취소"]})]}):(0,a.jsxs)("button",{onClick:()=>{v(!0)},className:"px-4 py-2 bg-yellow-400 text-black rounded hover:bg-yellow-500 transition-colors flex items-center gap-2",children:[(0,a.jsx)(d,{size:18}),"수정"]}),(0,a.jsxs)("button",{onClick:handleLogout,className:"px-4 py-2 bg-red-500 text-white rounded hover:bg-red-600 transition-colors flex items-center gap-2",children:[(0,a.jsx)(h.Z,{size:18}),"로그아웃"]})]})]}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-gray-300 text-sm font-medium mb-2",children:[(0,a.jsx)(x.Z,{className:"inline mr-2",size:16}),"이메일"]}),(0,a.jsx)("div",{className:"text-white bg-gray-800 px-4 py-3 rounded-lg",children:null==e?void 0:e.email})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-gray-300 text-sm font-medium mb-2",children:[(0,a.jsx)(m.Z,{className:"inline mr-2",size:16}),"이름"]}),f?(0,a.jsx)("input",{type:"text",name:"name",value:j.name,onChange:handleChange,className:"w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-lg text-white focus:outline-none focus:border-yellow-400 transition-colors"}):(0,a.jsx)("div",{className:"text-white bg-gray-800 px-4 py-3 rounded-lg",children:(null==n?void 0:n.name)||"미설정"})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-gray-300 text-sm font-medium mb-2",children:[(0,a.jsx)(y.Z,{className:"inline mr-2",size:16}),"전화번호"]}),f?(0,a.jsx)("input",{type:"tel",name:"phone",value:j.phone,onChange:handleChange,className:"w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-lg text-white focus:outline-none focus:border-yellow-400 transition-colors"}):(0,a.jsx)("div",{className:"text-white bg-gray-800 px-4 py-3 rounded-lg",children:(null==n?void 0:n.phone)||"미설정"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-gray-300 text-sm font-medium mb-2",children:"자기소개"}),f?(0,a.jsx)("textarea",{name:"bio",value:j.bio,onChange:handleChange,rows:4,className:"w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-lg text-white focus:outline-none focus:border-yellow-400 transition-colors resize-none"}):(0,a.jsx)("div",{className:"text-white bg-gray-800 px-4 py-3 rounded-lg min-h-[100px]",children:(null==n?void 0:n.bio)||"자기소개를 작성해주세요."})]}),(0,a.jsx)("div",{className:"pt-4 border-t border-gray-700",children:(0,a.jsxs)("div",{className:"flex justify-between text-sm text-gray-400",children:[(0,a.jsxs)("span",{children:["회원 유형: ",(null==n?void 0:n.role)==="admin"?"관리자":"일반회원"]}),(0,a.jsxs)("span",{children:["가입일: ",new Date(null==n?void 0:n.created_at).toLocaleDateString()]})]})})]})]}),(null==n?void 0:n.role)==="admin"&&(0,a.jsxs)(i.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:"mt-6 bg-gray-900/50 backdrop-blur-sm rounded-xl p-6 border border-yellow-500/20",children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-white mb-4",children:"관리자 메뉴"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsx)(p(),{href:"/admin",className:"px-4 py-3 bg-yellow-400 text-black rounded hover:bg-yellow-500 transition-colors text-center font-semibold",children:"관리자 페이지"}),(0,a.jsx)(p(),{href:"/admin/lectures",className:"px-4 py-3 bg-gray-700 text-white rounded hover:bg-gray-600 transition-colors text-center font-semibold",children:"강의 관리"})]})]})]})})})}}},function(e){e.O(0,[123,815,396,146,971,472,744],function(){return e(e.s=3102)}),_N_E=e.O()}]);