<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>dduksangLAB UI Test Suite</title>
    <style>
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif; margin: 20px; }
        .test-container { max-width: 1200px; margin: 0 auto; }
        .test-section { margin: 20px 0; padding: 15px; border: 1px solid #ddd; border-radius: 8px; }
        .test-item { margin: 10px 0; padding: 10px; background: #f9f9f9; border-radius: 4px; }
        .test-result { margin-left: 10px; font-weight: bold; }
        .pass { color: #22c55e; }
        .fail { color: #ef4444; }
        .warn { color: #f59e0b; }
        button { padding: 10px 20px; margin: 5px; background: #3b82f6; color: white; border: none; border-radius: 4px; cursor: pointer; }
        button:hover { background: #2563eb; }
        .screenshot-area { margin: 20px 0; }
        iframe { width: 100%; height: 600px; border: 1px solid #ddd; border-radius: 8px; margin: 10px 0; }
        .mobile-view { width: 375px; height: 667px; }
        .desktop-view { width: 100%; height: 800px; }
        #results { margin-top: 20px; padding: 15px; background: #f3f4f6; border-radius: 8px; }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>ğŸ§ª dduksangLAB UI ì™„ì „ í…ŒìŠ¤íŠ¸ ë„êµ¬</h1>
        <p>ëª¨ë“  ë²„íŠ¼ê³¼ ê¸°ëŠ¥ì„ í•˜ë‚˜í•˜ë‚˜ í´ë¦­í•˜ë©´ì„œ í…ŒìŠ¤íŠ¸í•©ë‹ˆë‹¤.</p>
        
        <div class="test-section">
            <h2>ğŸš€ ìë™ í…ŒìŠ¤íŠ¸ ì‹œì‘</h2>
            <button onclick="startComprehensiveTest()">ì „ì²´ UI í…ŒìŠ¤íŠ¸ ì‹œì‘</button>
            <button onclick="testSpecificPage()">íŠ¹ì • í˜ì´ì§€ í…ŒìŠ¤íŠ¸</button>
            <button onclick="testMobileResponsive()">ëª¨ë°”ì¼ ë°˜ì‘í˜• í…ŒìŠ¤íŠ¸</button>
            <button onclick="generateReport()">í…ŒìŠ¤íŠ¸ ë¦¬í¬íŠ¸ ìƒì„±</button>
        </div>

        <div class="test-section">
            <h2>ğŸ“± í˜ì´ì§€ë³„ ë¯¸ë¦¬ë³´ê¸° & í…ŒìŠ¤íŠ¸</h2>
            <div>
                <button onclick="loadPage('/')">ë©”ì¸ í˜ì´ì§€</button>
                <button onclick="loadPage('/lectures')">ê°•ì˜ í˜ì´ì§€</button>
                <button onclick="loadPage('/ai-trends')">AI íŠ¸ë Œë“œ</button>
                <button onclick="loadPage('/community')">ì»¤ë®¤ë‹ˆí‹°</button>
                <button onclick="loadPage('/auth/login')">ë¡œê·¸ì¸</button>
                <button onclick="loadPage('/auth/signup')">íšŒì›ê°€ì…</button>
            </div>
            <div class="screenshot-area">
                <iframe id="preview-frame" class="desktop-view" src="http://localhost:3000"></iframe>
            </div>
        </div>

        <div class="test-section">
            <h2>ğŸ” ì‹¤ì‹œê°„ í…ŒìŠ¤íŠ¸ ê²°ê³¼</h2>
            <div id="results">í…ŒìŠ¤íŠ¸ë¥¼ ì‹œì‘í•˜ë ¤ë©´ ìœ„ì˜ ë²„íŠ¼ì„ í´ë¦­í•˜ì„¸ìš”.</div>
        </div>

        <div class="test-section">
            <h2>ğŸ“Š ë°œê²¬ëœ ë¬¸ì œì  ëª©ë¡</h2>
            <div id="issues-list">ë¬¸ì œì ì´ ë°œê²¬ë˜ë©´ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤.</div>
        </div>
    </div>

    <script>
        let testResults = [];
        let issues = [];
        
        function log(message, type = 'info') {
            const results = document.getElementById('results');
            const timestamp = new Date().toLocaleTimeString();
            const color = type === 'pass' ? '#22c55e' : type === 'fail' ? '#ef4444' : type === 'warn' ? '#f59e0b' : '#374151';
            results.innerHTML += `<div style="color: ${color}; margin: 5px 0;">[${timestamp}] ${message}</div>`;
            results.scrollTop = results.scrollHeight;
        }

        function addIssue(issue) {
            issues.push(issue);
            const issuesList = document.getElementById('issues-list');
            issuesList.innerHTML += `<div style="color: #ef4444; margin: 5px 0; padding: 8px; background: #fee2e2; border-radius: 4px;">âŒ ${issue}</div>`;
        }

        function loadPage(path) {
            const frame = document.getElementById('preview-frame');
            frame.src = `http://localhost:3000${path}`;
            log(`í˜ì´ì§€ ë¡œë”©: ${path}`, 'info');
            
            // í˜ì´ì§€ ë¡œë“œ í›„ ìë™ í…ŒìŠ¤íŠ¸
            setTimeout(() => {
                testCurrentPage(path);
            }, 2000);
        }

        function testCurrentPage(path) {
            const frame = document.getElementById('preview-frame');
            try {
                const frameDoc = frame.contentDocument || frame.contentWindow.document;
                
                // ê¸°ë³¸ ìš”ì†Œ ì²´í¬
                const hasHeader = frameDoc.querySelector('header, nav, [role="navigation"]');
                const hasMain = frameDoc.querySelector('main, [role="main"], .main-content');
                const hasFooter = frameDoc.querySelector('footer, [role="contentinfo"]');
                
                if (hasHeader) {
                    log(`âœ… ${path}: í—¤ë” ë°œê²¬`, 'pass');
                } else {
                    log(`âŒ ${path}: í—¤ë” ì—†ìŒ`, 'fail');
                    addIssue(`${path} í˜ì´ì§€ì— í—¤ë”ê°€ ì—†ìŠµë‹ˆë‹¤`);
                }
                
                if (hasMain) {
                    log(`âœ… ${path}: ë©”ì¸ ì½˜í…ì¸  ì˜ì—­ ë°œê²¬`, 'pass');
                } else {
                    log(`âš ï¸ ${path}: ë©”ì¸ ì½˜í…ì¸  ì˜ì—­ ë¶ˆëª…í™•`, 'warn');
                }
                
                // ë²„íŠ¼ ë° ë§í¬ ì²´í¬
                const buttons = frameDoc.querySelectorAll('button, input[type="button"], input[type="submit"]');
                const links = frameDoc.querySelectorAll('a[href]');
                
                log(`ğŸ“Š ${path}: ë²„íŠ¼ ${buttons.length}ê°œ, ë§í¬ ${links.length}ê°œ ë°œê²¬`, 'info');
                
                // í¼ ìš”ì†Œ ì²´í¬
                const forms = frameDoc.querySelectorAll('form');
                const inputs = frameDoc.querySelectorAll('input, textarea, select');
                
                if (forms.length > 0) {
                    log(`ğŸ“ ${path}: í¼ ${forms.length}ê°œ, ì…ë ¥ í•„ë“œ ${inputs.length}ê°œ ë°œê²¬`, 'info');
                }
                
                // ì´ë¯¸ì§€ ì²´í¬
                const images = frameDoc.querySelectorAll('img');
                let brokenImages = 0;
                images.forEach(img => {
                    if (!img.complete || img.naturalHeight === 0) {
                        brokenImages++;
                    }
                });
                
                if (brokenImages > 0) {
                    log(`âŒ ${path}: ê¹¨ì§„ ì´ë¯¸ì§€ ${brokenImages}ê°œ ë°œê²¬`, 'fail');
                    addIssue(`${path} í˜ì´ì§€ì— ê¹¨ì§„ ì´ë¯¸ì§€ ${brokenImages}ê°œ`);
                } else if (images.length > 0) {
                    log(`âœ… ${path}: ëª¨ë“  ì´ë¯¸ì§€(${images.length}ê°œ) ì •ìƒ`, 'pass');
                }
                
                // JavaScript ì˜¤ë¥˜ ì²´í¬ (ì œí•œì )
                const scripts = frameDoc.querySelectorAll('script');
                log(`âš™ï¸ ${path}: ìŠ¤í¬ë¦½íŠ¸ ${scripts.length}ê°œ ë¡œë“œë¨`, 'info');
                
            } catch (error) {
                log(`âŒ ${path}: í˜ì´ì§€ ë¶„ì„ ì‹¤íŒ¨ - ${error.message}`, 'fail');
                addIssue(`${path} í˜ì´ì§€ ë¶„ì„ ì¤‘ ì˜¤ë¥˜: ${error.message}`);
            }
        }

        function startComprehensiveTest() {
            log('ğŸš€ ì „ì²´ UI í…ŒìŠ¤íŠ¸ ì‹œì‘!', 'info');
            issues = [];
            
            const pages = ['/', '/lectures', '/ai-trends', '/community', '/auth/login', '/auth/signup'];
            let currentPageIndex = 0;
            
            function testNextPage() {
                if (currentPageIndex < pages.length) {
                    const page = pages[currentPageIndex];
                    log(`ğŸ” í…ŒìŠ¤íŠ¸ ì¤‘: ${page}`, 'info');
                    loadPage(page);
                    currentPageIndex++;
                    setTimeout(testNextPage, 4000); // 4ì´ˆ ëŒ€ê¸° í›„ ë‹¤ìŒ í˜ì´ì§€
                } else {
                    log('âœ… ëª¨ë“  í˜ì´ì§€ í…ŒìŠ¤íŠ¸ ì™„ë£Œ!', 'pass');
                    generateReport();
                }
            }
            
            testNextPage();
        }

        function testSpecificPage() {
            const path = prompt('í…ŒìŠ¤íŠ¸í•  í˜ì´ì§€ ê²½ë¡œë¥¼ ì…ë ¥í•˜ì„¸ìš” (ì˜ˆ: /lectures):');
            if (path) {
                loadPage(path);
            }
        }

        function testMobileResponsive() {
            log('ğŸ“± ëª¨ë°”ì¼ ë°˜ì‘í˜• í…ŒìŠ¤íŠ¸ ì‹œì‘', 'info');
            const frame = document.getElementById('preview-frame');
            frame.className = 'mobile-view';
            
            // ë©”ì¸ í˜ì´ì§€ë¡œ ì´ë™
            loadPage('/');
            
            setTimeout(() => {
                frame.className = 'desktop-view';
                log('ğŸ–¥ï¸ ë°ìŠ¤í¬í†± ë·°ë¡œ ë³µì›', 'info');
            }, 10000);
        }

        function generateReport() {
            log('ğŸ“Š í…ŒìŠ¤íŠ¸ ë¦¬í¬íŠ¸ ìƒì„± ì¤‘...', 'info');
            
            const totalTests = testResults.length;
            const passedTests = testResults.filter(t => t.status === 'pass').length;
            const failedTests = testResults.filter(t => t.status === 'fail').length;
            
            const report = `
                <h3>ğŸ“‹ ìµœì¢… í…ŒìŠ¤íŠ¸ ë¦¬í¬íŠ¸</h3>
                <p><strong>í…ŒìŠ¤íŠ¸ ì™„ë£Œ ì‹œê°„:</strong> ${new Date().toLocaleString()}</p>
                <p><strong>ì´ ë°œê²¬ëœ ë¬¸ì œì :</strong> ${issues.length}ê°œ</p>
                <p><strong>í…ŒìŠ¤íŠ¸ ìƒíƒœ:</strong> ${issues.length === 0 ? 'âœ… ëª¨ë“  í…ŒìŠ¤íŠ¸ í†µê³¼' : 'âŒ ë¬¸ì œì  ë°œê²¬'}</p>
                
                <h4>ğŸ¯ ê¶Œì¥ ì¡°ì¹˜ì‚¬í•­:</h4>
                <ul>
                    ${issues.length === 0 ? '<li>âœ… ì¶”ê°€ ê°œì„ ì‚¬í•­ ì—†ìŒ - ë°°í¬ ì¤€ë¹„ ì™„ë£Œ!</li>' : 
                      issues.map(issue => `<li>ğŸ”§ ${issue}</li>`).join('')}
                </ul>
            `;
            
            const results = document.getElementById('results');
            results.innerHTML += `<div style="margin-top: 20px; padding: 15px; background: white; border-radius: 8px; border: 1px solid #ddd;">${report}</div>`;
        }

        // ì´ˆê¸° í˜ì´ì§€ ë¡œë“œ
        window.onload = function() {
            log('ğŸ¯ dduksangLAB UI í…ŒìŠ¤íŠ¸ ë„êµ¬ ì¤€ë¹„ ì™„ë£Œ', 'pass');
            log('ğŸ’¡ ì™¼ìª½ ë²„íŠ¼ë“¤ì„ í´ë¦­í•˜ì—¬ í…ŒìŠ¤íŠ¸ë¥¼ ì‹œì‘í•˜ì„¸ìš”', 'info');
        };

        // ì£¼ê¸°ì ìœ¼ë¡œ ì„œë²„ ìƒíƒœ ì²´í¬
        function checkServerStatus() {
            fetch('http://localhost:3000')
                .then(response => {
                    if (response.ok) {
                        log('âœ… ì„œë²„ ì—°ê²° ì •ìƒ', 'pass');
                    } else {
                        log('âš ï¸ ì„œë²„ ì‘ë‹µ ì´ìƒ', 'warn');
                    }
                })
                .catch(error => {
                    log('âŒ ì„œë²„ ì—°ê²° ì‹¤íŒ¨', 'fail');
                    addIssue('ì„œë²„ê°€ ì‹¤í–‰ ì¤‘ì´ ì•„ë‹™ë‹ˆë‹¤');
                });
        }

        // 5ì´ˆë§ˆë‹¤ ì„œë²„ ìƒíƒœ ì²´í¬
        setInterval(checkServerStatus, 5000);
        checkServerStatus(); // ì´ˆê¸° ì²´í¬
    </script>
</body>
</html>